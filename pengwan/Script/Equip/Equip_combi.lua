--[[
file:	Equip_combi.lua
desc:	合成功能
author:	wk
update:	2013-1-07
refix:	done by wk
]]--
local type,pairs = type,pairs
local SendLuaMsg 	 = SendLuaMsg
local msgh_s2c_def	 = msgh_s2c_def
local equip_comi	 = msgh_s2c_def[23][10]	
local TipCenter,GetStringMsg,isFullNum	 = TipCenter,GetStringMsg,isFullNum
local CI_GetEquipDetails,GiveGoods = CI_GetEquipDetails,GiveGoods
local CI_UpdateEquipDetails	 = CI_UpdateEquipDetails
local CheckGoods	 = CheckGoods
local CheckCost	 = CheckCost
local look = look
local obj_set = require('Script.Achieve.fun')
local set_obj_pos = obj_set.set_obj_pos
local shq_m = require('Script.ShenQi.shenqi_func')
local shenqi_init = shq_m.shenqi_init


local money_base1=100 --宝石合成需要钱基数
local money_base2=1000--道具合成需要钱基数
local money_base3=1000--装备进阶需要钱基数
---{{410,4,0}}  第3位为0标识材料,1标识道具进阶
--合成配置表
local Combi_conf = {
	[1] = {
		[1] = {
			title = "攻击宝石",--攻击之玉
			color = '#feff97',
			[1] = { result = 411 , {{410,4,0}} , cost = 100,level=1} ,
			[2] = { result = 412 , {{411,4,0}} , cost = 100,level=1} ,
			[3] = { result = 413 , {{412,4,0}} , cost = 100,level=1} ,
			[4] = { result = 414 , {{413,4,0}} , cost = 100,level=1} ,
			[5] = { result = 415 , {{414,4,0}} , cost = 100,level=1} ,
			[6] = { result = 416 , {{415,4,0}} , cost = 100,level=1} ,
			[7] = { result = 417 , {{416,4,0}} , cost = 100,level=1} ,
			[8] = { result = 418 , {{417,4,0}} , cost = 100,level=1} ,
			[9] = { result = 419 , {{418,4,0}} , cost = 100,level=1} ,
			},
		[2] = {
			title = "防御宝石",
			color = '#feff97',
			--防御之玉
			[1] = { result = 421 , {{420,4,0}} , cost = 100,level=1} ,
			[2] = { result = 422 , {{421,4,0}} , cost = 100,level=1} ,
			[3] = { result = 423 , {{422,4,0}} , cost = 100,level=1} ,
			[4] = { result = 424 , {{423,4,0}} , cost = 100,level=1} ,
			[5] = { result = 425 , {{424,4,0}} , cost = 100,level=1} ,
			[6] = { result = 426 , {{425,4,0}} , cost = 100,level=1} ,
			[7] = { result = 427 , {{426,4,0}} , cost = 100,level=1} ,
			[8] = { result = 428 , {{427,4,0}} , cost = 100,level=1} ,
			[9] = { result = 429 , {{428,4,0}} , cost = 100,level=1} ,
			},
		[3] = {
			title = "气血宝石",
			color = '#feff97',
			--气血之玉
			[1] = { result = 431 , {{430,4,0}} , cost = 100,level=1} ,
			[2] = { result = 432 , {{431,4,0}} , cost = 100,level=1} ,
			[3] = { result = 433 , {{432,4,0}} , cost = 100,level=1} ,
			[4] = { result = 434 , {{433,4,0}} , cost = 100,level=1} ,
			[5] = { result = 435 , {{434,4,0}} , cost = 100,level=1} ,
			[6] = { result = 436 , {{435,4,0}} , cost = 100,level=1} ,
			[7] = { result = 437 , {{436,4,0}} , cost = 100,level=1} ,
			[8] = { result = 438 , {{437,4,0}} , cost = 100,level=1} ,
			[9] = { result = 439 , {{438,4,0}} , cost = 100,level=1} ,
			},
		[4] = {
			title = "暴击宝石",
			color = '#feff97',
			--暴击之玉
			[1] = { result = 441 , {{440,4,0}} , cost = 100,level=1} ,
			[2] = { result = 442 , {{441,4,0}} , cost = 100,level=1} ,
			[3] = { result = 443 , {{442,4,0}} , cost = 100,level=1} ,
			[4] = { result = 444 , {{443,4,0}} , cost = 100,level=1} ,
			[5] = { result = 445 , {{444,4,0}} , cost = 100,level=1} ,
			[6] = { result = 446 , {{445,4,0}} , cost = 100,level=1} ,
			[7] = { result = 447 , {{446,4,0}} , cost = 100,level=1} ,
			[8] = { result = 448 , {{447,4,0}} , cost = 100,level=1} ,
			[9] = { result = 449 , {{448,4,0}} , cost = 100,level=1} ,
			},
		[5] = {
			title = "回避宝石",
			color = '#feff97',
			--回避之玉
			[1] = { result = 451 , {{450,4,0}} , cost = 100,level=1} ,
			[2] = { result = 452 , {{451,4,0}} , cost = 100,level=1} ,
			[3] = { result = 453 , {{452,4,0}} , cost = 100,level=1} ,
			[4] = { result = 454 , {{453,4,0}} , cost = 100,level=1} ,
			[5] = { result = 455 , {{454,4,0}} , cost = 100,level=1} ,
			[6] = { result = 456 , {{455,4,0}} , cost = 100,level=1} ,
			[7] = { result = 457 , {{456,4,0}} , cost = 100,level=1} ,
			[8] = { result = 458 , {{457,4,0}} , cost = 100,level=1} ,
			[9] = { result = 459 , {{458,4,0}} , cost = 100,level=1} ,
			},
		[6] = {
			title = "格挡宝石",
			color = '#feff97',
			--格挡之玉
			[1] = { result = 461 , {{460,4,0}} , cost = 100,level=1} ,
			[2] = { result = 462 , {{461,4,0}} , cost = 100,level=1} ,
			[3] = { result = 463 , {{462,4,0}} , cost = 100,level=1} ,
			[4] = { result = 464 , {{463,4,0}} , cost = 100,level=1} ,
			[5] = { result = 465 , {{464,4,0}} , cost = 100,level=1} ,
			[6] = { result = 466 , {{465,4,0}} , cost = 100,level=1} ,
			[7] = { result = 467 , {{466,4,0}} , cost = 100,level=1} ,
			[8] = { result = 468 , {{467,4,0}} , cost = 100,level=1} ,
			[9] = { result = 469 , {{468,4,0}} , cost = 100,level=1} ,
			},
		[7] = {
			title = "命中宝石",
			color = '#feff97',
			--命中之玉
			[1] = { result = 471 , {{470,4,0}} , cost = 100,level=1} ,
			[2] = { result = 472 , {{471,4,0}} , cost = 100,level=1} ,
			[3] = { result = 473 , {{472,4,0}} , cost = 100,level=1} ,
			[4] = { result = 474 , {{473,4,0}} , cost = 100,level=1} ,
			[5] = { result = 475 , {{474,4,0}} , cost = 100,level=1} ,
			[6] = { result = 476 , {{475,4,0}} , cost = 100,level=1} ,
			[7] = { result = 477 , {{476,4,0}} , cost = 100,level=1} ,
			[8] = { result = 478 , {{477,4,0}} , cost = 100,level=1} ,
			[9] = { result = 479 , {{478,4,0}} , cost = 100,level=1} ,
			},
		[8] = {
			title = "抵抗宝石",
			color = '#feff97',
			--抵抗之玉
			[1] = { result = 481 , {{480,4,0}} , cost = 100,level=1} ,
			[2] = { result = 482 , {{481,4,0}} , cost = 100,level=1} ,
			[3] = { result = 483 , {{482,4,0}} , cost = 100,level=1} ,
			[4] = { result = 484 , {{483,4,0}} , cost = 100,level=1} ,
			[5] = { result = 485 , {{484,4,0}} , cost = 100,level=1} ,
			[6] = { result = 486 , {{485,4,0}} , cost = 100,level=1} ,
			[7] = { result = 487 , {{486,4,0}} , cost = 100,level=1} ,
			[8] = { result = 488 , {{487,4,0}} , cost = 100,level=1} ,
			[9] = { result = 489 , {{488,4,0}} , cost = 100,level=1} ,
			},
		[9] = {
			title = "攻击魂石",
			color = '#feff97',
			--攻击魂石
			[1] = { result = 1522 , {{1521,4,0}} , cost = 10000,level=1} ,
			[2] = { result = 1523 , {{1522,4,0}} , cost = 20000,level=1} ,
			[3] = { result = 1524 , {{1523,4,0}} , cost = 30000,level=1} ,
			[4] = { result = 1525 , {{1524,4,0}} , cost = 40000,level=1} ,
			[5] = { result = 1526 , {{1525,4,0}} , cost = 50000,level=1} ,
			[6] = { result = 1527 , {{1526,4,0}} , cost = 60000,level=1} ,
			[7] = { result = 1528 , {{1527,4,0}} , cost = 70000,level=1} ,
			[8] = { result = 1529 , {{1528,4,0}} , cost = 80000,level=1} ,
			[9] = { result = 1530 , {{1529,4,0}} , cost = 90000,level=1} ,		
			},	
		[10] = {
			title = "属性魂石",
			color = '#feff97',
			--属性魂石
			[1] = { result = 1537 , {{1536,4,0}} , cost = 10000,level=1} ,
			[2] = { result = 1538 , {{1537,4,0}} , cost = 20000,level=1} ,
			[3] = { result = 1539 , {{1538,4,0}} , cost = 30000,level=1} ,
			[4] = { result = 1540 , {{1539,4,0}} , cost = 40000,level=1} ,
			[5] = { result = 1541 , {{1540,4,0}} , cost = 50000,level=1} ,
			[6] = { result = 1542 , {{1541,4,0}} , cost = 60000,level=1} ,
			[7] = { result = 1543 , {{1542,4,0}} , cost = 70000,level=1} ,
			[8] = { result = 1544 , {{1543,4,0}} , cost = 80000,level=1} ,
			[9] = { result = 1545 , {{1544,4,0}} , cost = 90000,level=1} ,		
			},	
		[11] = {
			title = "减免魂石",
			color = '#feff97',
			--减免魂石
			[1] = { result = 1552 , {{1551,4,0}} , cost = 10000,level=1} ,
			[2] = { result = 1553 , {{1552,4,0}} , cost = 20000,level=1} ,
			[3] = { result = 1554 , {{1553,4,0}} , cost = 30000,level=1} ,
			[4] = { result = 1555 , {{1554,4,0}} , cost = 40000,level=1} ,
			[5] = { result = 1556 , {{1555,4,0}} , cost = 50000,level=1} ,
			[6] = { result = 1557 , {{1556,4,0}} , cost = 60000,level=1} ,
			[7] = { result = 1558 , {{1557,4,0}} , cost = 70000,level=1} ,
			[8] = { result = 1559 , {{1558,4,0}} , cost = 80000,level=1} ,
			[9] = { result = 1560 , {{1559,4,0}} , cost = 90000,level=1} ,		
			},				
		},
		
	[2] = {
		[1] = {
			title = "幸运石",
			color = '#feff97',
			--幸运石合成
			[1] = { result = 611 , {{610,2,0}} , cost = 1000,level=1} ,
			[2] = { result = 612 , {{611,2,0}} , cost = 2000,level=1} ,
			[3] = { result = 613 , {{612,2,0}} , cost = 3000,level=1} ,
			[4] = { result = 614 , {{613,2,0}} , cost = 4000,level=1} ,
			[5] = { result = 615 , {{614,2,0}} , cost = 5000,level=1} ,
			[6] = { result = 616 , {{615,2,0}} , cost = 6000,level=1} ,
			[7] = { result = 617 , {{616,2,0}} , cost = 7000,level=1} ,
			--[8] = { result = 618 , {{617,2,0}} , cost = 128000,level=1} ,
			},
		[2] = {
			title = "洗炼石",
			color = 2,
			--洗炼石合成
			[1] = { result = 605 , {{604,3,0}} , cost = 500,level=1} ,
			[2] = { result = 606 , {{605,3,0}} , cost = 500,level=1} ,
			},
		[3] = {
			title = "星辰石",
			color = 4,
			--星辰石合成
			[1] = { result = 714 , {{713,4,0}} , cost = 100000,level=1} ,
			[2] = { result = 715 , {{714,4,0}} , cost = 200000,level=1} ,
			[3] = { result = 716 , {{715,4,0}} , cost = 400000,level=1} ,
			[4] = { result = 717 , {{716,4,0}} , cost = 800000,level=1} ,
			},
		[4] = {
			title = "神力结晶",
			color = 4,
			--星辰石合成
			[1] = { result = 733 , {{732,4,0}} , cost = 100000,level=1} ,
			[2] = { result = 734 , {{733,4,0}} , cost = 200000,level=1} ,
			[3] = { result = 735 , {{734,4,0}} , cost = 400000,level=1} ,
			[4] = { result = 736 , {{735,4,0}} , cost = 800000,level=1} ,
			},		
		--时装之魂	
		[5] = {	
			title = "时装之魂",
			color = 4,
			[1] = { result = 781 , {{780,2,0}} , cost = 10000,level=1} ,
			[2] = { result = 782 , {{781,2,0}} , cost = 10000,level=1} ,
		},	
		--封神卡牌	
		[6] = {	
			title = "封神卡牌",
			color = 4,
			[1] = { result = 1100 , {{1099,2,0}} , cost = 1000,level=1} ,
		},	
		--坐骑卡合成	
		[7] = {	
			title = "坐骑卡牌",
			color = 4,
			[1] = { result = 300 , {{646,100,0}} , cost = 200000,level=1} ,
		},	
		[8] = {
			title = "经验果实",
			color = 4,
			--经验果实
			[1] = { result = 1504 , {{1503,5,0}} , cost = 50000,level=1} ,
			[2] = { result = 1505 , {{1504,5,0}} , cost = 100000,level=1} ,
		},			
		[9] = {
			title = "其他物品",
			color = 4,
			--战场宝箱
			[1] = { result = 689 , {{688,100,0}} , cost = 20000,level=1} ,
			[2] = { result = 790 , {{814,10,0}} , cost = 10000,level=1} ,
		},	
	},

	[3] = {
		[1] = {
			title = "橙装碎片",
			color = 4,
			--橙装碎片合成
			[1] = { result = 648 , {{647,2,0}} , cost = 5000,level=1} ,
			[2] = { result = 653 , {{652,2,0}} , cost = 5000,level=1} ,
			[3] = { result = 658 , {{657,2,0}} , cost = 5000,level=1} ,
			
			[4] = { result = 649 , {{648,2,0}} , cost = 10000,level=65} ,
			[5] = { result = 654 , {{653,2,0}} , cost = 10000,level=65} ,
			[6] = { result = 659 , {{658,2,0}} , cost = 10000,level=65} ,
			[7] = { result = 650 , {{649,2,0}} , cost = 15000,level=80} ,
			[8] = { result = 655 , {{654,2,0}} , cost = 15000,level=80} ,
			[9] = { result = 660 , {{659,2,0}} , cost = 15000,level=80} ,
			[10] = { result = 651 , {{650,2,0}} , cost = 20000,level=90} ,			
			[11] = { result = 656 , {{655,2,0}} , cost = 20000,level=90} ,			
			[12] = { result = 661 , {{660,2,0}} , cost = 20000,level=90} ,
			},
		[2] = {
			title = "紫装碎片",
			color = 3,
			--紫色装碎片合成
			[1] = { result = 719 , {{718,2,0}} , cost = 1000,level=1} ,
			[2] = { result = 725 , {{724,2,0}} , cost = 1000,level=1} ,
			[3] = { result = 720 , {{719,2,0}} , cost = 1000,level=1} ,
			[4] = { result = 726 , {{725,2,0}} , cost = 1000,level=1} ,
			[5] = { result = 721 , {{720,2,0}} , cost = 1000,level=65} ,
			[6] = { result = 727 , {{726,2,0}} , cost = 1000,level=65} ,
			[7] = { result = 722 , {{721,2,0}} , cost = 1000,level=80} ,
			[8] = { result = 728 , {{727,2,0}} , cost = 1000,level=80} ,
			[9] = { result = 723 , {{722,2,0}} , cost = 1000,level=90} ,			
			[10] = { result = 729 , {{728,2,0}} , cost = 1000,level=90} ,
			},
		--40级紫色装备
		[3] = {	
			title = "40级紫色装备",
			color = 3,
			--40紫色武器合成
			[1] = { result = 5011 , {{718,15,0}} , cost = 10000,level=1,index =0} ,
			[2] = { result = 5048 , {{718,15,0}} , cost = 10000,level=1,index =0} ,
			[3] = { result = 5085 , {{718,15,0}} , cost = 10000,level=1,index =0} ,
			[4] = { result = 5122 , {{718,15,0}} , cost = 10000,level=1,index =0} ,
			[5] = { result = 5159 , {{718,15,0}} , cost = 10000,level=1,index =0} ,
			[6] = { result = 5196 , {{718,15,0}} , cost = 10000,level=1,index =0} ,
				--紫色衣服合成
			[7] = { result = 5344 , {{724,20,0}} , cost = 10000,level=1,index =0} ,
			[8] = { result = 5381 , {{724,20,0}} , cost = 10000,level=1,index =0} ,
			[9] = { result = 5418 , {{724,20,0}} , cost = 10000,level=1,index =0} ,
			--紫色裤子合成
			[10] = { result = 5233 , {{724,20,0}} , cost = 10000,level=1,index =0} ,
			[11] = { result = 5270 , {{724,20,0}} , cost = 10000,level=1,index =0} ,
			[12] = { result = 5307 , {{724,20,0}} , cost = 10000,level=1,index =0} ,
			--紫色鞋子合成
			[13] = { result = 5455 , {{724,20,0}} , cost = 10000,level=1,index =0} ,
			[14] = { result = 5492 , {{724,20,0}} , cost = 10000,level=1,index =0} ,
			[15] = { result = 5529 , {{724,20,0}} , cost = 10000,level=1,index =0} ,
			
		},
		[4] = {	
			title = "50级紫色装备",
			color = 3,
			level = 45,
			--50紫色武器合成
			[1] = { result = 5015 , {{719,15,0}} , cost = 20000,level=45,index =0} ,
			[2] = { result = 5052 , {{719,15,0}} , cost = 20000,level=45,index =0} ,
			[3] = { result = 5089 , {{719,15,0}} , cost = 20000,level=45,index =0} ,
			[4] = { result = 5126 , {{719,15,0}} , cost = 20000,level=45,index =0} ,
			[5] = { result = 5163 , {{719,15,0}} , cost = 20000,level=45,index =0} ,
			[6] = { result = 5200 , {{719,15,0}} , cost = 20000,level=45,index =0} ,
						
			[7] = { result = 5348 , {{725,30,0}} , cost = 20000,level=45,index =0} ,
			[8] = { result = 5385 , {{725,30,0}} , cost = 20000,level=45,index =0} ,
			[9] = { result = 5422 , {{725,30,0}} , cost = 20000,level=45,index =0} ,
			
			[10] = { result = 5237 , {{725,30,0}} , cost = 20000,level=45,index =0} ,
			[11] = { result = 5274 , {{725,30,0}} , cost = 20000,level=45,index =0} ,
			[12] = { result = 5311 , {{725,30,0}} , cost = 20000,level=45,index =0} ,
			
			[13] = { result = 5459 , {{725,30,0}} , cost = 20000,level=45,index =0} ,
			[14] = { result = 5496 , {{725,30,0}} , cost = 20000,level=45,index =0} ,
			[15] = { result = 5533 , {{725,30,0}} , cost = 20000,level=45,index =0} ,
			
		},
		[5] = {	
			title = "60级紫色装备",
			color = 3,
			level = 55,
			--60紫色武器合成
			[1] = { result = 5019 , {{720,20,0}} , cost = 40000,level=55,index =0} ,
			[2] = { result = 5056 , {{720,20,0}} , cost = 40000,level=55,index =0} ,
			[3] = { result = 5093 , {{720,20,0}} , cost = 40000,level=55,index =0} ,
			[4] = { result = 5130 , {{720,20,0}} , cost = 40000,level=55,index =0} ,
			[5] = { result = 5167 , {{720,20,0}} , cost = 40000,level=55,index =0} ,
			[6] = { result = 5204 , {{720,20,0}} , cost = 40000,level=55,index =0} ,
			
			[7] = { result = 5352 , {{726,40,0}} , cost = 40000,level=55,index =0} ,
			[8] = { result = 5389 , {{726,40,0}} , cost = 40000,level=55,index =0} ,
			[9] = { result = 5426 , {{726,40,0}} , cost = 40000,level=55,index =0} ,
			
			[10] = { result = 5241 , {{726,40,0}} , cost = 40000,level=55,index =0} ,
			[11] = { result = 5278 , {{726,40,0}} , cost = 40000,level=55,index =0} ,
			[12] = { result = 5315 , {{726,40,0}} , cost = 40000,level=55,index =0} ,
		
			[13] = { result = 5463 , {{726,40,0}} , cost = 40000,level=55,index =0} ,
			[14] = { result = 5500 , {{726,40,0}} , cost = 40000,level=55,index =0} ,
			[15] = { result = 5537 , {{726,40,0}} , cost = 40000,level=55,index =0} ,
			
		},
		[6] = {	
			title = "70级紫色装备",
			color = 3,
			level = 65,
			[1] = { result = 5023 , {{721,20,0}} , cost = 40000,level=65,index =0} ,
			[2] = { result = 5060 , {{721,20,0}} , cost = 40000,level=65,index =0} ,
			[3] = { result = 5097 , {{721,20,0}} , cost = 40000,level=65,index =0} ,
			[4] = { result = 5134 , {{721,20,0}} , cost = 40000,level=65,index =0} ,
			[5] = { result = 5171 , {{721,20,0}} , cost = 40000,level=65,index =0} ,
			[6] = { result = 5208 , {{721,20,0}} , cost = 40000,level=65,index =0} ,
			
			[7] = { result = 5356 , {{727,40,0}} , cost = 40000,level=65,index =0} ,
			[8] = { result = 5393 , {{727,40,0}} , cost = 40000,level=65,index =0} ,
			[9] = { result = 5430 , {{727,40,0}} , cost = 40000,level=65,index =0} ,
			
			[10] = { result = 5245 , {{727,40,0}} , cost = 40000,level=65,index =0} ,
			[11] = { result = 5282 , {{727,40,0}} , cost = 40000,level=65,index =0} ,
			[12] = { result = 5319 , {{727,40,0}} , cost = 40000,level=65,index =0} ,
		
			[13] = { result = 5467 , {{727,40,0}} , cost = 40000,level=65,index =0} ,
			[14] = { result = 5504 , {{727,40,0}} , cost = 40000,level=65,index =0} ,
			[15] = { result = 5541 , {{727,40,0}} , cost = 40000,level=65,index =0} ,
			
		},
		[7] = {	
			title = "80级紫色装备",
			color = 3,
			level = 80,
			[1] = { result = 5027 , {{722,20,0}} , cost = 40000,level=75,index =0} ,
			[2] = { result = 5064 , {{722,20,0}} , cost = 40000,level=75,index =0} ,
			[3] = { result = 5101 , {{722,20,0}} , cost = 40000,level=75,index =0} ,
			[4] = { result = 5138 , {{722,20,0}} , cost = 40000,level=75,index =0} ,
			[5] = { result = 5175 , {{722,20,0}} , cost = 40000,level=75,index =0} ,
			[6] = { result = 5212 , {{722,20,0}} , cost = 40000,level=75,index =0} ,
			
			[7] = { result = 5360 , {{728,40,0}} , cost = 40000,level=75,index =0} ,
			[8] = { result = 5397 , {{728,40,0}} , cost = 40000,level=75,index =0} ,
			[9] = { result = 5434 , {{728,40,0}} , cost = 40000,level=75,index =0} ,
			
			[10] = { result = 5249 , {{728,40,0}} , cost = 40000,level=75,index =0} ,
			[11] = { result = 5286 , {{728,40,0}} , cost = 40000,level=75,index =0} ,
			[12] = { result = 5323 , {{728,40,0}} , cost = 40000,level=75,index =0} ,
		
			[13] = { result = 5471 , {{728,40,0}} , cost = 40000,level=75,index =0} ,
			[14] = { result = 5508 , {{728,40,0}} , cost = 40000,level=75,index =0} ,
			[15] = { result = 5545 , {{728,40,0}} , cost = 40000,level=75,index =0} ,
			
		},
		
		[8] = {	
			title = "90级紫色装备",
			color = 3,
			level = 90,
			[1] = { result = 5031 , {{723,20,0}} , cost = 40000,level=85,index =0} ,
			[2] = { result = 5068 , {{723,20,0}} , cost = 40000,level=85,index =0} ,
			[3] = { result = 5105 , {{723,20,0}} , cost = 40000,level=85,index =0} ,
			[4] = { result = 5142 , {{723,20,0}} , cost = 40000,level=85,index =0} ,
			[5] = { result = 5179 , {{723,20,0}} , cost = 40000,level=85,index =0} ,
			[6] = { result = 5216 , {{723,20,0}} , cost = 40000,level=85,index =0} ,
			
			[7] = { result = 5364 , {{729,40,0}} , cost = 40000,level=85,index =0} ,
			[8] = { result = 5401 , {{729,40,0}} , cost = 40000,level=85,index =0} ,
			[9] = { result = 5438 , {{729,40,0}} , cost = 40000,level=85,index =0} ,
			
			[10] = { result = 5253 , {{729,40,0}} , cost = 40000,level=85,index =0} ,
			[11] = { result = 5290 , {{729,40,0}} , cost = 40000,level=85,index =0} ,
			[12] = { result = 5327 , {{729,40,0}} , cost = 40000,level=85,index =0} ,
		
			[13] = { result = 5475 , {{729,40,0}} , cost = 40000,level=85,index =0} ,
			[14] = { result = 5512 , {{729,40,0}} , cost = 40000,level=85,index =0} ,
			[15] = { result = 5549 , {{729,40,0}} , cost = 40000,level=85,index =0} ,
			
		},
		[9] = {	
			title = "100级橙色装备",
			color = 4,
			level = 95,
			[1] = { result = 5035 , {{832,80,0}} , cost = 40000,level=95,index =0} ,
			[2] = { result = 5072 , {{832,80,0}} , cost = 40000,level=95,index =0} ,
			[3] = { result = 5109 , {{832,80,0}} , cost = 40000,level=95,index =0} ,
			[4] = { result = 5146 , {{832,80,0}} , cost = 40000,level=95,index =0} ,
			[5] = { result = 5183 , {{832,80,0}} , cost = 40000,level=95,index =0} ,
			[6] = { result = 5220 , {{832,80,0}} , cost = 40000,level=95,index =0} ,
			
			[7] = { result = 5368 , {{832,60,0}} , cost = 40000,level=95,index =0} ,
			[8] = { result = 5405 , {{832,60,0}} , cost = 40000,level=95,index =0} ,
			[9] = { result = 5442 , {{832,60,0}} , cost = 40000,level=95,index =0} ,
			
			[10] = { result = 5257 , {{832,50,0}} , cost = 40000,level=95,index =0} ,
			[11] = { result = 5294 , {{832,50,0}} , cost = 40000,level=95,index =0} ,
			[12] = { result = 5331 , {{832,50,0}} , cost = 40000,level=95,index =0} ,
		
			
			
		},
		
		[10] = {	
			title = "神器戒指",
			color = 5,
			level = 50,
			[1] = { result = 806 , {{805,300,0}} , cost = 100000,level=50,index =0} ,
			[2] = { result = 807 , {{805,300,0}} , cost = 100000,level=50,index =0} ,
			
		},
	},
	[4] = {
	
		[1] = {	
			title = "家将技能书",
			color = 1,
			level = 1,
			[1] = { result = 1286 , {{750,10,0}} , cost = 10000,level=1,index =33} ,		
			[2] = { result = 1291 , {{750,10,0}} , cost = 10000,level=1,index =33} ,		
			[3] = { result = 1296 , {{750,10,0}} , cost = 10000,level=1,index =33} ,		
			[4] = { result = 1301 , {{750,10,0}} , cost = 10000,level=1,index =33} ,		
			
			[5] = { result = 1306 , {{750,20,0},{751,3,0}} , cost = 10000,level=1,index =33} ,		
			[6] = { result = 1311 , {{750,20,0},{751,3,0}} , cost = 10000,level=1,index =33} ,			
			[7] = { result = 1316 , {{750,20,0},{751,3,0}} , cost = 10000,level=1,index =34} ,
			[8] = { result = 1321 , {{750,20,0},{751,3,0}} , cost = 10000,level=1,index =34} ,	
			[9] = { result = 1326 , {{750,20,0},{751,3,0}} , cost = 10000,level=1,index =34} ,
			
			[10] = { result = 1341 , {{750,40,0},{751,5,0},{752,1,0}} , cost = 10000,level=1,index =35} ,		
			[11] = { result = 1346 , {{750,40,0},{751,5,0},{752,1,0}} , cost = 10000,level=1,index =35} ,		
			[12] = { result = 1351 , {{750,40,0},{751,5,0},{752,1,0}} , cost = 10000,level=1,index =35} ,			
			[13] = { result = 1356 , {{750,40,0},{751,5,0},{752,1,0}} , cost = 10000,level=1,index =36} ,		
			[14] = { result = 1331 , {{750,40,0},{751,5,0},{752,1,0}} , cost = 10000,level=1,index =36} ,		
			[15] = { result = 1336 , {{750,40,0},{751,5,0},{752,2,0}} , cost = 10000,level=1,index =36} ,
		},	
		[2] = {	
			title = "神翼技能晶石",
			color = 3,
			level = 1,
			[1] = { result = 1411 , {{765,5,0}} , cost = 10000,level=1,index =33} ,		
			[2] = { result = 1416 , {{765,5,0}} , cost = 10000,level=1,index =33} ,		
			[3] = { result = 1421 , {{765,5,0}} , cost = 10000,level=1,index =33} ,		
			[4] = { result = 1426 , {{765,5,0}} , cost = 10000,level=1,index =33} ,	
			[5] = { result = 1431 , {{765,5,0}} , cost = 10000,level=1,index =33} ,	
			[6] = { result = 1436 , {{765,5,0}} , cost = 10000,level=1,index =33} ,				
		},
		
		
		},
	[999] = {--装备（ 提品、升阶 ）
		--60级紫色装备提品60橙
		[1] = {	
			[1]={result=5020,{{5019,1,1},{773,4,0},{637,100,0},{648,8,0}},cost=500000},
			[2]={result=5057,{{5056,1,1},{773,4,0},{637,100,0},{648,8,0}},cost=500000},
			[3]={result=5094,{{5093,1,1},{773,4,0},{637,100,0},{648,8,0}},cost=500000},
			[4]={result=5131,{{5130,1,1},{773,4,0},{637,100,0},{648,8,0}},cost=500000},
			[5]={result=5168,{{5167,1,1},{773,4,0},{637,100,0},{648,8,0}},cost=500000},
			[6]={result=5205,{{5204,1,1},{773,4,0},{637,100,0},{648,8,0}},cost=500000},
			[7]={result=5353,{{5352,1,1},{773,4,0},{637,100,0},{653,8,0}},cost=500000},
			[8]={result=5390,{{5389,1,1},{773,4,0},{637,100,0},{653,8,0}},cost=500000},
			[9]={result=5427,{{5426,1,1},{773,4,0},{637,100,0},{653,8,0}},cost=500000},
			[10]={result=5242,{{5241,1,1},{773,4,0},{637,100,0},{653,8,0}},cost=500000},
			[11]={result=5279,{{5278,1,1},{773,4,0},{637,100,0},{653,8,0}},cost=500000},
			[12]={result=5316,{{5315,1,1},{773,4,0},{637,100,0},{653,8,0}},cost=500000},
			[13]={result=5464,{{5463,1,1},{773,4,0},{637,100,0},{653,8,0}},cost=500000},
			[14]={result=5501,{{5500,1,1},{773,4,0},{637,100,0},{653,8,0}},cost=500000},
			[15]={result=5538,{{5537,1,1},{773,4,0},{637,100,0},{653,8,0}},cost=500000},
			[16]={result=5574,{{5573,1,1},{773,4,0},{637,100,0},{658,8,0}},cost=500000},
			[17]={result=5606,{{5605,1,1},{773,4,0},{637,100,0},{658,8,0}},cost=500000},
			[18]={result=5638,{{5637,1,1},{773,4,0},{637,100,0},{658,8,0}},cost=500000},
			[19]={result=5670,{{5669,1,1},{773,4,0},{637,100,0},{658,8,0}},cost=500000},
		},	
		--50级紫色装备升阶60紫色
		[2] = {	
			[1]={result=5019,{{5015,1,1},{5019,1,0}},cost=200000},
			[2]={result=5056,{{5052,1,1},{5056,1,0}},cost=200000},
			[3]={result=5093,{{5089,1,1},{5093,1,0}},cost=200000},
			[4]={result=5130,{{5126,1,1},{5130,1,0}},cost=200000},
			[5]={result=5167,{{5163,1,1},{5167,1,0}},cost=200000},
			[6]={result=5204,{{5200,1,1},{5204,1,0}},cost=200000},
			[7]={result=5352,{{5348,1,1},{5352,1,0}},cost=200000},
			[8]={result=5389,{{5385,1,1},{5389,1,0}},cost=200000},
			[9]={result=5426,{{5422,1,1},{5426,1,0}},cost=200000},
			[10]={result=5241,{{5237,1,1},{5241,1,0}},cost=200000},
			[11]={result=5278,{{5274,1,1},{5278,1,0}},cost=200000},
			[12]={result=5315,{{5311,1,1},{5315,1,0}},cost=200000},
			[13]={result=5463,{{5459,1,1},{5463,1,0}},cost=200000},
			[14]={result=5500,{{5496,1,1},{5500,1,0}},cost=200000},
			[15]={result=5537,{{5533,1,1},{5537,1,0}},cost=200000},
			[16]={result=5573,{{5569,1,1},{5573,1,0}},cost=200000},
			[17]={result=5605,{{5601,1,1},{5605,1,0}},cost=200000},
			[18]={result=5637,{{5633,1,1},{5637,1,0}},cost=200000},
			[19]={result=5669,{{5665,1,1},{5669,1,0}},cost=200000},
		},
		--50级橙色装备升阶60橙
		[3] = {	
			[1]={result=5020,{{5016,1,1},{5019,1,0},{773,4,0},{637,100,0},{648,8,0}},cost=500000},
			[2]={result=5057,{{5053,1,1},{5056,1,0},{773,4,0},{637,100,0},{648,8,0}},cost=500000},
			[3]={result=5094,{{5090,1,1},{5093,1,0},{773,4,0},{637,100,0},{648,8,0}},cost=500000},
			[4]={result=5131,{{5127,1,1},{5130,1,0},{773,4,0},{637,100,0},{648,8,0}},cost=500000},
			[5]={result=5168,{{5164,1,1},{5167,1,0},{773,4,0},{637,100,0},{648,8,0}},cost=500000},
			[6]={result=5205,{{5201,1,1},{5204,1,0},{773,4,0},{637,100,0},{648,8,0}},cost=500000},
			[7]={result=5353,{{5349,1,1},{5352,1,0},{773,4,0},{637,100,0},{653,8,0}},cost=500000},
			[8]={result=5390,{{5386,1,1},{5389,1,0},{773,4,0},{637,100,0},{653,8,0}},cost=500000},
			[9]={result=5427,{{5423,1,1},{5426,1,0},{773,4,0},{637,100,0},{653,8,0}},cost=500000},
			[10]={result=5242,{{5238,1,1},{5241,1,0},{773,4,0},{637,100,0},{653,8,0}},cost=500000},
			[11]={result=5279,{{5275,1,1},{5278,1,0},{773,4,0},{637,100,0},{653,8,0}},cost=500000},
			[12]={result=5316,{{5312,1,1},{5315,1,0},{773,4,0},{637,100,0},{653,8,0}},cost=500000},
			[13]={result=5464,{{5460,1,1},{5463,1,0},{773,4,0},{637,100,0},{653,8,0}},cost=500000},
			[14]={result=5501,{{5497,1,1},{5500,1,0},{773,4,0},{637,100,0},{653,8,0}},cost=500000},
			[15]={result=5538,{{5534,1,1},{5537,1,0},{773,4,0},{637,100,0},{653,8,0}},cost=500000},
			[16]={result=5574,{{5570,1,1},{5573,1,0},{773,4,0},{637,100,0},{658,8,0}},cost=500000},
			[17]={result=5606,{{5602,1,1},{5605,1,0},{773,4,0},{637,100,0},{658,8,0}},cost=500000},
			[18]={result=5638,{{5634,1,1},{5637,1,0},{773,4,0},{637,100,0},{658,8,0}},cost=500000},
			[19]={result=5670,{{5666,1,1},{5669,1,0},{773,4,0},{637,100,0},{658,8,0}},cost=500000},
		},
		--50级紫色装备提品50橙
		[4] = {	
			[1]={result=5016,{{5015,1,1},{773,3,0},{637,50,0},{647,5,0}},cost=200000},
			[2]={result=5053,{{5052,1,1},{773,3,0},{637,50,0},{647,5,0}},cost=200000},
			[3]={result=5090,{{5089,1,1},{773,3,0},{637,50,0},{647,5,0}},cost=200000},
			[4]={result=5127,{{5126,1,1},{773,3,0},{637,50,0},{647,5,0}},cost=200000},
			[5]={result=5164,{{5163,1,1},{773,3,0},{637,50,0},{647,5,0}},cost=200000},
			[6]={result=5201,{{5200,1,1},{773,3,0},{637,50,0},{647,5,0}},cost=200000},
			[7]={result=5349,{{5348,1,1},{773,3,0},{637,50,0},{652,5,0}},cost=200000},
			[8]={result=5386,{{5385,1,1},{773,3,0},{637,50,0},{652,5,0}},cost=200000},
			[9]={result=5423,{{5422,1,1},{773,3,0},{637,50,0},{652,5,0}},cost=200000},
			[10]={result=5238,{{5237,1,1},{773,3,0},{637,50,0},{652,5,0}},cost=200000},
			[11]={result=5275,{{5274,1,1},{773,3,0},{637,50,0},{652,5,0}},cost=200000},
			[12]={result=5312,{{5311,1,1},{773,3,0},{637,50,0},{652,5,0}},cost=200000},
			[13]={result=5460,{{5459,1,1},{773,3,0},{637,50,0},{652,5,0}},cost=200000},
			[14]={result=5497,{{5496,1,1},{773,3,0},{637,50,0},{652,5,0}},cost=200000},
			[15]={result=5534,{{5533,1,1},{773,3,0},{637,50,0},{652,5,0}},cost=200000},
			[16]={result=5570,{{5569,1,1},{773,3,0},{637,50,0},{657,5,0}},cost=200000},
			[17]={result=5602,{{5601,1,1},{773,3,0},{637,50,0},{657,5,0}},cost=200000},
			[18]={result=5634,{{5633,1,1},{773,3,0},{637,50,0},{657,5,0}},cost=200000},
			[19]={result=5666,{{5665,1,1},{773,3,0},{637,50,0},{657,5,0}},cost=200000},
		},
		--40级紫色装备升阶50紫色
		[5] = {
			[1]={result=5015,{{5011,1,1},{5015,1,0}},cost=100000},
			[2]={result=5052,{{5048,1,1},{5052,1,0}},cost=100000},
			[3]={result=5089,{{5085,1,1},{5089,1,0}},cost=100000},
			[4]={result=5126,{{5122,1,1},{5126,1,0}},cost=100000},
			[5]={result=5163,{{5159,1,1},{5163,1,0}},cost=100000},
			[6]={result=5200,{{5196,1,1},{5200,1,0}},cost=100000},
			[7]={result=5348,{{5344,1,1},{5348,1,0}},cost=100000},
			[8]={result=5385,{{5381,1,1},{5385,1,0}},cost=100000},
			[9]={result=5422,{{5418,1,1},{5422,1,0}},cost=100000},
			[10]={result=5237,{{5233,1,1},{5237,1,0}},cost=100000},
			[11]={result=5274,{{5270,1,1},{5274,1,0}},cost=100000},
			[12]={result=5311,{{5307,1,1},{5311,1,0}},cost=100000},
			[13]={result=5459,{{5455,1,1},{5459,1,0}},cost=100000},
			[14]={result=5496,{{5492,1,1},{5496,1,0}},cost=100000},
			[15]={result=5533,{{5529,1,1},{5533,1,0}},cost=100000},
			[16]={result=5569,{{5565,1,1},{5569,1,0}},cost=100000},
			[17]={result=5601,{{5597,1,1},{5601,1,0}},cost=100000},
			[18]={result=5633,{{5629,1,1},{5633,1,0}},cost=100000},
			[19]={result=5665,{{5661,1,1},{5665,1,0}},cost=100000},	
	    },
		--40级橙色装备升阶50橙
		[6] = {	
			[1]={result=5016,{{5012,1,1},{5015,1,0},{773,3,0},{637,50,0},{647,5,0}},cost=200000},
			[2]={result=5053,{{5049,1,1},{5052,1,0},{773,3,0},{637,50,0},{647,5,0}},cost=200000},
			[3]={result=5090,{{5086,1,1},{5089,1,0},{773,3,0},{637,50,0},{647,5,0}},cost=200000},
			[4]={result=5127,{{5123,1,1},{5126,1,0},{773,3,0},{637,50,0},{647,5,0}},cost=200000},
			[5]={result=5164,{{5160,1,1},{5163,1,0},{773,3,0},{637,50,0},{647,5,0}},cost=200000},
			[6]={result=5201,{{5197,1,1},{5200,1,0},{773,3,0},{637,50,0},{647,5,0}},cost=200000},
			[7]={result=5349,{{5345,1,1},{5348,1,0},{773,3,0},{637,50,0},{652,5,0}},cost=200000},
			[8]={result=5386,{{5382,1,1},{5385,1,0},{773,3,0},{637,50,0},{652,5,0}},cost=200000},
			[9]={result=5423,{{5419,1,1},{5422,1,0},{773,3,0},{637,50,0},{652,5,0}},cost=200000},
			[10]={result=5238,{{5234,1,1},{5237,1,0},{773,3,0},{637,50,0},{652,5,0}},cost=200000},
			[11]={result=5275,{{5271,1,1},{5274,1,0},{773,3,0},{637,50,0},{652,5,0}},cost=200000},
			[12]={result=5312,{{5308,1,1},{5311,1,0},{773,3,0},{637,50,0},{652,5,0}},cost=200000},
			[13]={result=5460,{{5456,1,1},{5459,1,0},{773,3,0},{637,50,0},{652,5,0}},cost=200000},
			[14]={result=5497,{{5493,1,1},{5496,1,0},{773,3,0},{637,50,0},{652,5,0}},cost=200000},
			[15]={result=5534,{{5530,1,1},{5533,1,0},{773,3,0},{637,50,0},{652,5,0}},cost=200000},
			[16]={result=5570,{{5566,1,1},{5569,1,0},{773,3,0},{637,50,0},{657,5,0}},cost=200000},
			[17]={result=5602,{{5598,1,1},{5601,1,0},{773,3,0},{637,50,0},{657,5,0}},cost=200000},
			[18]={result=5634,{{5630,1,1},{5633,1,0},{773,3,0},{637,50,0},{657,5,0}},cost=200000},
			[19]={result=5666,{{5662,1,1},{5665,1,0},{773,3,0},{637,50,0},{657,5,0}},cost=200000},
	    },
		--40紫提品40橙色
		[7] = {
			[1]={result=5012,{{5011,1,1},{773,3,0}},cost=50000},
			[2]={result=5049,{{5048,1,1},{773,3,0}},cost=50000},
			[3]={result=5086,{{5085,1,1},{773,3,0}},cost=50000},
			[4]={result=5123,{{5122,1,1},{773,3,0}},cost=50000},
			[5]={result=5160,{{5159,1,1},{773,3,0}},cost=50000},
			[6]={result=5197,{{5196,1,1},{773,3,0}},cost=50000},
			[7]={result=5345,{{5344,1,1},{773,3,0}},cost=50000},
			[8]={result=5382,{{5381,1,1},{773,3,0}},cost=50000},
			[9]={result=5419,{{5418,1,1},{773,3,0}},cost=50000},
			[10]={result=5234,{{5233,1,1},{773,3,0}},cost=50000},
			[11]={result=5271,{{5270,1,1},{773,3,0}},cost=50000},
			[12]={result=5308,{{5307,1,1},{773,3,0}},cost=50000},
			[13]={result=5456,{{5455,1,1},{773,3,0}},cost=50000},
			[14]={result=5493,{{5492,1,1},{773,3,0}},cost=50000},
			[15]={result=5530,{{5529,1,1},{773,3,0}},cost=50000},
			[16]={result=5566,{{5565,1,1},{773,3,0}},cost=50000},
			[17]={result=5598,{{5597,1,1},{773,3,0}},cost=50000},
			[18]={result=5630,{{5629,1,1},{773,3,0}},cost=50000},
			[19]={result=5662,{{5661,1,1},{773,3,0}},cost=50000},
		},	
		--30紫升阶40
		[8] = {
			[1]={result=5011,{{5007,1,1},{5011,1,0}},cost=20000},
			[2]={result=5048,{{5044,1,1},{5048,1,0}},cost=20000},
			[3]={result=5085,{{5081,1,1},{5085,1,0}},cost=20000},
			[4]={result=5122,{{5118,1,1},{5122,1,0}},cost=20000},
			[5]={result=5159,{{5155,1,1},{5159,1,0}},cost=20000},
			[6]={result=5196,{{5192,1,1},{5196,1,0}},cost=20000},
			[7]={result=5344,{{5340,1,1},{5344,1,0}},cost=20000},
			[8]={result=5381,{{5377,1,1},{5381,1,0}},cost=20000},
			[9]={result=5418,{{5414,1,1},{5418,1,0}},cost=20000},
			[10]={result=5233,{{5229,1,1},{5233,1,0}},cost=20000},
			[11]={result=5270,{{5266,1,1},{5270,1,0}},cost=20000},
			[12]={result=5307,{{5303,1,1},{5307,1,0}},cost=20000},
			[13]={result=5455,{{5451,1,1},{5455,1,0}},cost=20000},
			[14]={result=5492,{{5488,1,1},{5492,1,0}},cost=20000},
			[15]={result=5529,{{5525,1,1},{5529,1,0}},cost=20000},
			[16]={result=5565,{{5561,1,1},{5565,1,0}},cost=20000},
			[17]={result=5597,{{5593,1,1},{5597,1,0}},cost=20000},
			[18]={result=5629,{{5625,1,1},{5629,1,0}},cost=20000},
			[19]={result=5661,{{5657,1,1},{5661,1,0}},cost=20000},
		},	
		--20橙升阶40
		[9] = {
			[1]={result=5012,{{5004,1,1},{773,2,0}},cost=30000},
			[2]={result=5049,{{5041,1,1},{773,2,0}},cost=30000},
			[3]={result=5086,{{5078,1,1},{773,2,0}},cost=30000},
			[4]={result=5123,{{5115,1,1},{773,2,0}},cost=30000},
			[5]={result=5160,{{5152,1,1},{773,2,0}},cost=30000},
			[6]={result=5197,{{5189,1,1},{773,2,0}},cost=30000},
			[7]={result=5345,{{5341,1,1},{773,2,0}},cost=30000},
			[8]={result=5382,{{5378,1,1},{773,2,0}},cost=30000},
			[9]={result=5419,{{5415,1,1},{773,2,0}},cost=30000},
			[10]={result=5234,{{5226,1,1},{773,2,0}},cost=30000},
			[11]={result=5271,{{5263,1,1},{773,2,0}},cost=30000},
			[12]={result=5308,{{5300,1,1},{773,2,0}},cost=30000},
			[13]={result=5456,{{5448,1,1},{773,2,0}},cost=30000},
			[14]={result=5493,{{5485,1,1},{773,2,0}},cost=30000},
			[15]={result=5530,{{5522,1,1},{773,2,0}},cost=30000},
			[16]={result=5566,{{5558,1,1},{773,2,0}},cost=30000},
			[17]={result=5598,{{5590,1,1},{773,2,0}},cost=30000},
			[18]={result=5630,{{5622,1,1},{773,2,0}},cost=30000},
			[19]={result=5662,{{5654,1,1},{773,2,0}},cost=30000},
		},
		--70紫提品橙色
		[10] = {
			[1]={result=5024,{{5023,1,1},{773,5,0},{637,150,0},{649,10,0}},cost=1000000},
			[2]={result=5061,{{5060,1,1},{773,5,0},{637,150,0},{649,10,0}},cost=1000000},
			[3]={result=5098,{{5097,1,1},{773,5,0},{637,150,0},{649,10,0}},cost=1000000},
			[4]={result=5135,{{5134,1,1},{773,5,0},{637,150,0},{649,10,0}},cost=1000000},
			[5]={result=5172,{{5171,1,1},{773,5,0},{637,150,0},{649,10,0}},cost=1000000},
			[6]={result=5209,{{5208,1,1},{773,5,0},{637,150,0},{649,10,0}},cost=1000000},
			[7]={result=5357,{{5356,1,1},{773,5,0},{637,150,0},{654,10,0}},cost=1000000},
			[8]={result=5394,{{5393,1,1},{773,5,0},{637,150,0},{654,10,0}},cost=1000000},
			[9]={result=5431,{{5430,1,1},{773,5,0},{637,150,0},{654,10,0}},cost=1000000},
			[10]={result=5246,{{5245,1,1},{773,5,0},{637,150,0},{654,10,0}},cost=1000000},
			[11]={result=5283,{{5282,1,1},{773,5,0},{637,150,0},{654,10,0}},cost=1000000},
			[12]={result=5320,{{5319,1,1},{773,5,0},{637,150,0},{654,10,0}},cost=1000000},
			[13]={result=5468,{{5467,1,1},{773,5,0},{637,150,0},{654,10,0}},cost=1000000},
			[14]={result=5505,{{5504,1,1},{773,5,0},{637,150,0},{654,10,0}},cost=1000000},
			[15]={result=5542,{{5541,1,1},{773,5,0},{637,150,0},{654,10,0}},cost=1000000},
			[16]={result=5578,{{5577,1,1},{773,5,0},{637,150,0},{659,10,0}},cost=1000000},
			[17]={result=5610,{{5609,1,1},{773,5,0},{637,150,0},{659,10,0}},cost=1000000},
			[18]={result=5642,{{5641,1,1},{773,5,0},{637,150,0},{659,10,0}},cost=1000000},
			[19]={result=5674,{{5673,1,1},{773,5,0},{637,150,0},{659,10,0}},cost=1000000},
		},
		--60紫升阶
		[11] = {
			[1]={result=5023,{{5019,1,1},{5023,1,0}},cost=300000},
			[2]={result=5060,{{5056,1,1},{5060,1,0}},cost=300000},
			[3]={result=5097,{{5093,1,1},{5097,1,0}},cost=300000},
			[4]={result=5134,{{5130,1,1},{5134,1,0}},cost=300000},
			[5]={result=5171,{{5167,1,1},{5171,1,0}},cost=300000},
			[6]={result=5208,{{5204,1,1},{5208,1,0}},cost=300000},
			[7]={result=5356,{{5352,1,1},{5356,1,0}},cost=300000},
			[8]={result=5393,{{5389,1,1},{5393,1,0}},cost=300000},
			[9]={result=5430,{{5426,1,1},{5430,1,0}},cost=300000},
			[10]={result=5245,{{5241,1,1},{5245,1,0}},cost=300000},
			[11]={result=5282,{{5278,1,1},{5282,1,0}},cost=300000},
			[12]={result=5319,{{5315,1,1},{5319,1,0}},cost=300000},
			[13]={result=5467,{{5463,1,1},{5467,1,0}},cost=300000},
			[14]={result=5504,{{5500,1,1},{5504,1,0}},cost=300000},
			[15]={result=5541,{{5537,1,1},{5541,1,0}},cost=300000},
			[16]={result=5577,{{5573,1,1},{5577,1,0}},cost=300000},
			[17]={result=5609,{{5605,1,1},{5609,1,0}},cost=300000},
			[18]={result=5641,{{5637,1,1},{5641,1,0}},cost=300000},
			[19]={result=5673,{{5669,1,1},{5673,1,0}},cost=300000},
		},
		--60橙升阶
		[12] = {
			[1]={result=5024,{{5020,1,1},{5023,1,0},{773,5,0},{637,150,0},{649,10,0}},cost=1000000},
			[2]={result=5061,{{5057,1,1},{5060,1,0},{773,5,0},{637,150,0},{649,10,0}},cost=1000000},
			[3]={result=5098,{{5094,1,1},{5097,1,0},{773,5,0},{637,150,0},{649,10,0}},cost=1000000},
			[4]={result=5135,{{5131,1,1},{5134,1,0},{773,5,0},{637,150,0},{649,10,0}},cost=1000000},
			[5]={result=5172,{{5168,1,1},{5171,1,0},{773,5,0},{637,150,0},{649,10,0}},cost=1000000},
			[6]={result=5209,{{5205,1,1},{5208,1,0},{773,5,0},{637,150,0},{649,10,0}},cost=1000000},
			[7]={result=5357,{{5353,1,1},{5356,1,0},{773,5,0},{637,150,0},{654,10,0}},cost=1000000},
			[8]={result=5394,{{5390,1,1},{5393,1,0},{773,5,0},{637,150,0},{654,10,0}},cost=1000000},
			[9]={result=5431,{{5427,1,1},{5430,1,0},{773,5,0},{637,150,0},{654,10,0}},cost=1000000},
			[10]={result=5246,{{5242,1,1},{5245,1,0},{773,5,0},{637,150,0},{654,10,0}},cost=1000000},
			[11]={result=5283,{{5279,1,1},{5282,1,0},{773,5,0},{637,150,0},{654,10,0}},cost=1000000},
			[12]={result=5320,{{5316,1,1},{5319,1,0},{773,5,0},{637,150,0},{654,10,0}},cost=1000000},
			[13]={result=5468,{{5464,1,1},{5467,1,0},{773,5,0},{637,150,0},{654,10,0}},cost=1000000},
			[14]={result=5505,{{5501,1,1},{5504,1,0},{773,5,0},{637,150,0},{654,10,0}},cost=1000000},
			[15]={result=5542,{{5538,1,1},{5541,1,0},{773,5,0},{637,150,0},{654,10,0}},cost=1000000},
			[16]={result=5578,{{5574,1,1},{5577,1,0},{773,5,0},{637,150,0},{659,10,0}},cost=1000000},
			[17]={result=5610,{{5606,1,1},{5609,1,0},{773,5,0},{637,150,0},{659,10,0}},cost=1000000},
			[18]={result=5642,{{5638,1,1},{5641,1,0},{773,5,0},{637,150,0},{659,10,0}},cost=1000000},
			[19]={result=5674,{{5670,1,1},{5673,1,0},{773,5,0},{637,150,0},{659,10,0}},cost=1000000},
		},			
		--80紫转橙
		[13] = {
			[1]={result=5028,{{5027,1,1},{773,8,0},{637,300,0},{650,10,0}},cost=1000000},
			[2]={result=5065,{{5064,1,1},{773,8,0},{637,300,0},{650,10,0}},cost=1000000},
			[3]={result=5102,{{5101,1,1},{773,8,0},{637,300,0},{650,10,0}},cost=1000000},
			[4]={result=5139,{{5138,1,1},{773,8,0},{637,300,0},{650,10,0}},cost=1000000},
			[5]={result=5176,{{5175,1,1},{773,8,0},{637,300,0},{650,10,0}},cost=1000000},
			[6]={result=5213,{{5212,1,1},{773,8,0},{637,300,0},{650,10,0}},cost=1000000},
			[7]={result=5361,{{5360,1,1},{773,8,0},{637,300,0},{655,10,0}},cost=1000000},
			[8]={result=5398,{{5397,1,1},{773,8,0},{637,300,0},{655,10,0}},cost=1000000},
			[9]={result=5435,{{5434,1,1},{773,8,0},{637,300,0},{655,10,0}},cost=1000000},
			[10]={result=5250,{{5249,1,1},{773,8,0},{637,300,0},{655,10,0}},cost=1000000},
			[11]={result=5287,{{5286,1,1},{773,8,0},{637,300,0},{655,10,0}},cost=1000000},
			[12]={result=5324,{{5323,1,1},{773,8,0},{637,300,0},{655,10,0}},cost=1000000},
			[13]={result=5472,{{5471,1,1},{773,8,0},{637,300,0},{655,10,0}},cost=1000000},
			[14]={result=5509,{{5508,1,1},{773,8,0},{637,300,0},{655,10,0}},cost=1000000},
			[15]={result=5546,{{5545,1,1},{773,8,0},{637,300,0},{655,10,0}},cost=1000000},
			[16]={result=5582,{{5581,1,1},{773,8,0},{637,300,0},{660,10,0}},cost=1000000},
			[17]={result=5614,{{5613,1,1},{773,8,0},{637,300,0},{660,10,0}},cost=1000000},
			[18]={result=5646,{{5645,1,1},{773,8,0},{637,300,0},{660,10,0}},cost=1000000},
			[19]={result=5678,{{5677,1,1},{773,8,0},{637,300,0},{660,10,0}},cost=1000000},
		},
		--70紫色提品
		[14] = {
			[1]={result=5027,{{5023,1,1},{5027,1,0}},cost=300000},
			[2]={result=5064,{{5060,1,1},{5064,1,0}},cost=300000},
			[3]={result=5101,{{5097,1,1},{5101,1,0}},cost=300000},
			[4]={result=5138,{{5134,1,1},{5138,1,0}},cost=300000},
			[5]={result=5175,{{5171,1,1},{5175,1,0}},cost=300000},
			[6]={result=5212,{{5208,1,1},{5212,1,0}},cost=300000},
			[7]={result=5360,{{5356,1,1},{5360,1,0}},cost=300000},
			[8]={result=5397,{{5393,1,1},{5397,1,0}},cost=300000},
			[9]={result=5434,{{5430,1,1},{5434,1,0}},cost=300000},
			[10]={result=5249,{{5245,1,1},{5249,1,0}},cost=300000},
			[11]={result=5286,{{5282,1,1},{5286,1,0}},cost=300000},
			[12]={result=5323,{{5319,1,1},{5323,1,0}},cost=300000},
			[13]={result=5471,{{5467,1,1},{5471,1,0}},cost=300000},
			[14]={result=5508,{{5504,1,1},{5508,1,0}},cost=300000},
			[15]={result=5545,{{5541,1,1},{5545,1,0}},cost=300000},
			[16]={result=5581,{{5577,1,1},{5581,1,0}},cost=300000},
			[17]={result=5613,{{5609,1,1},{5613,1,0}},cost=300000},
			[18]={result=5645,{{5641,1,1},{5645,1,0}},cost=300000},
			[19]={result=5677,{{5673,1,1},{5677,1,0}},cost=300000},
		},
	--70橙色提品
		[15] = {
			[1]={result=5028,{{5024,1,1},{5027,1,0},{773,8,0},{637,300,0},{650,10,0}},cost=1000000},
			[2]={result=5065,{{5061,1,1},{5064,1,0},{773,8,0},{637,300,0},{650,10,0}},cost=1000000},
			[3]={result=5102,{{5098,1,1},{5101,1,0},{773,8,0},{637,300,0},{650,10,0}},cost=1000000},
			[4]={result=5139,{{5135,1,1},{5138,1,0},{773,8,0},{637,300,0},{650,10,0}},cost=1000000},
			[5]={result=5176,{{5172,1,1},{5175,1,0},{773,8,0},{637,300,0},{650,10,0}},cost=1000000},
			[6]={result=5213,{{5209,1,1},{5212,1,0},{773,8,0},{637,300,0},{650,10,0}},cost=1000000},
			[7]={result=5361,{{5357,1,1},{5360,1,0},{773,8,0},{637,300,0},{655,10,0}},cost=1000000},
			[8]={result=5398,{{5394,1,1},{5397,1,0},{773,8,0},{637,300,0},{655,10,0}},cost=1000000},
			[9]={result=5435,{{5431,1,1},{5434,1,0},{773,8,0},{637,300,0},{655,10,0}},cost=1000000},
			[10]={result=5250,{{5246,1,1},{5249,1,0},{773,8,0},{637,300,0},{655,10,0}},cost=1000000},
			[11]={result=5287,{{5283,1,1},{5286,1,0},{773,8,0},{637,300,0},{655,10,0}},cost=1000000},
			[12]={result=5324,{{5320,1,1},{5323,1,0},{773,8,0},{637,300,0},{655,10,0}},cost=1000000},
			[13]={result=5472,{{5468,1,1},{5471,1,0},{773,8,0},{637,300,0},{655,10,0}},cost=1000000},
			[14]={result=5509,{{5505,1,1},{5508,1,0},{773,8,0},{637,300,0},{655,10,0}},cost=1000000},
			[15]={result=5546,{{5542,1,1},{5545,1,0},{773,8,0},{637,300,0},{655,10,0}},cost=1000000},
			[16]={result=5582,{{5578,1,1},{5581,1,0},{773,8,0},{637,300,0},{660,10,0}},cost=1000000},
			[17]={result=5614,{{5610,1,1},{5613,1,0},{773,8,0},{637,300,0},{660,10,0}},cost=1000000},
			[18]={result=5646,{{5642,1,1},{5645,1,0},{773,8,0},{637,300,0},{660,10,0}},cost=1000000},
			[19]={result=5678,{{5674,1,1},{5677,1,0},{773,8,0},{637,300,0},{660,10,0}},cost=1000000},
		},
		--90紫转橙
		[16] = {
			[1]={result=5032,{{5031,1,1},{773,10,0},{637,500,0},{651,20,0}},cost=2000000},
			[2]={result=5069,{{5068,1,1},{773,10,0},{637,500,0},{651,20,0}},cost=2000000},
			[3]={result=5106,{{5105,1,1},{773,10,0},{637,500,0},{651,20,0}},cost=2000000},
			[4]={result=5143,{{5142,1,1},{773,10,0},{637,500,0},{651,20,0}},cost=2000000},
			[5]={result=5180,{{5179,1,1},{773,10,0},{637,500,0},{651,20,0}},cost=2000000},
			[6]={result=5217,{{5216,1,1},{773,10,0},{637,500,0},{651,20,0}},cost=2000000},
			[7]={result=5365,{{5364,1,1},{773,10,0},{637,500,0},{656,20,0}},cost=2000000},
			[8]={result=5402,{{5401,1,1},{773,10,0},{637,500,0},{656,20,0}},cost=2000000},
			[9]={result=5439,{{5438,1,1},{773,10,0},{637,500,0},{656,20,0}},cost=2000000},
			[10]={result=5254,{{5253,1,1},{773,10,0},{637,500,0},{656,20,0}},cost=2000000},
			[11]={result=5291,{{5290,1,1},{773,10,0},{637,500,0},{656,20,0}},cost=2000000},
			[12]={result=5328,{{5327,1,1},{773,10,0},{637,500,0},{656,20,0}},cost=2000000},
			[13]={result=5476,{{5475,1,1},{773,10,0},{637,500,0},{656,20,0}},cost=2000000},
			[14]={result=5513,{{5512,1,1},{773,10,0},{637,500,0},{656,20,0}},cost=2000000},
			[15]={result=5550,{{5549,1,1},{773,10,0},{637,500,0},{656,20,0}},cost=2000000},
			[16]={result=5586,{{5585,1,1},{773,10,0},{637,500,0},{661,20,0}},cost=2000000},
			[17]={result=5618,{{5617,1,1},{773,10,0},{637,500,0},{661,20,0}},cost=2000000},
			[18]={result=5650,{{5649,1,1},{773,10,0},{637,500,0},{661,20,0}},cost=2000000},
			[19]={result=5682,{{5681,1,1},{773,10,0},{637,500,0},{661,20,0}},cost=2000000},

		},
		--80紫色升级
		[17] = {
			[1]={result=5031,{{5027,1,1},{5031,1,0}},cost=500000},
			[2]={result=5068,{{5064,1,1},{5068,1,0}},cost=500000},
			[3]={result=5105,{{5101,1,1},{5105,1,0}},cost=500000},
			[4]={result=5142,{{5138,1,1},{5142,1,0}},cost=500000},
			[5]={result=5179,{{5175,1,1},{5179,1,0}},cost=500000},
			[6]={result=5216,{{5212,1,1},{5216,1,0}},cost=500000},
			[7]={result=5364,{{5360,1,1},{5364,1,0}},cost=500000},
			[8]={result=5401,{{5397,1,1},{5401,1,0}},cost=500000},
			[9]={result=5438,{{5434,1,1},{5438,1,0}},cost=500000},
			[10]={result=5253,{{5249,1,1},{5253,1,0}},cost=500000},
			[11]={result=5290,{{5286,1,1},{5290,1,0}},cost=500000},
			[12]={result=5327,{{5323,1,1},{5327,1,0}},cost=500000},
			[13]={result=5475,{{5471,1,1},{5475,1,0}},cost=500000},
			[14]={result=5512,{{5508,1,1},{5512,1,0}},cost=500000},
			[15]={result=5549,{{5545,1,1},{5549,1,0}},cost=500000},
			[16]={result=5585,{{5581,1,1},{5585,1,0}},cost=500000},
			[17]={result=5617,{{5613,1,1},{5617,1,0}},cost=500000},
			[18]={result=5649,{{5645,1,1},{5649,1,0}},cost=500000},
			[19]={result=5681,{{5677,1,1},{5681,1,0}},cost=500000},

		},
		--80橙色升级
		[18] = {
			[1]={result=5032,{{5028,1,1},{5031,1,0},{773,10,0},{637,500,0},{651,20,0}},cost=2000000},
			[2]={result=5069,{{5065,1,1},{5068,1,0},{773,10,0},{637,500,0},{651,20,0}},cost=2000000},
			[3]={result=5106,{{5102,1,1},{5105,1,0},{773,10,0},{637,500,0},{651,20,0}},cost=2000000},
			[4]={result=5143,{{5139,1,1},{5142,1,0},{773,10,0},{637,500,0},{651,20,0}},cost=2000000},
			[5]={result=5180,{{5176,1,1},{5179,1,0},{773,10,0},{637,500,0},{651,20,0}},cost=2000000},
			[6]={result=5217,{{5213,1,1},{5216,1,0},{773,10,0},{637,500,0},{651,20,0}},cost=2000000},
			[7]={result=5365,{{5361,1,1},{5364,1,0},{773,10,0},{637,500,0},{656,20,0}},cost=2000000},
			[8]={result=5402,{{5398,1,1},{5401,1,0},{773,10,0},{637,500,0},{656,20,0}},cost=2000000},
			[9]={result=5439,{{5435,1,1},{5438,1,0},{773,10,0},{637,500,0},{656,20,0}},cost=2000000},
			[10]={result=5254,{{5250,1,1},{5253,1,0},{773,10,0},{637,500,0},{656,20,0}},cost=2000000},
			[11]={result=5291,{{5287,1,1},{5290,1,0},{773,10,0},{637,500,0},{656,20,0}},cost=2000000},
			[12]={result=5328,{{5324,1,1},{5327,1,0},{773,10,0},{637,500,0},{656,20,0}},cost=2000000},
			[13]={result=5476,{{5472,1,1},{5475,1,0},{773,10,0},{637,500,0},{656,20,0}},cost=2000000},
			[14]={result=5513,{{5509,1,1},{5512,1,0},{773,10,0},{637,500,0},{656,20,0}},cost=2000000},
			[15]={result=5550,{{5546,1,1},{5549,1,0},{773,10,0},{637,500,0},{656,20,0}},cost=2000000},
			[16]={result=5586,{{5582,1,1},{5585,1,0},{773,10,0},{637,500,0},{661,20,0}},cost=2000000},
			[17]={result=5618,{{5614,1,1},{5617,1,0},{773,10,0},{637,500,0},{661,20,0}},cost=2000000},
			[18]={result=5650,{{5646,1,1},{5649,1,0},{773,10,0},{637,500,0},{661,20,0}},cost=2000000},
			[19]={result=5682,{{5678,1,1},{5681,1,0},{773,10,0},{637,500,0},{661,20,0}},cost=2000000},

		},
		--90橙色升级100
		[19] = {
			[1]={result=5369,{{5365,1,1},{5368,1,0},{773,10,0},{637,500,0}},cost=2000000},
			[2]={result=5406,{{5402,1,1},{5405,1,0},{773,10,0},{637,500,0}},cost=2000000},
			[3]={result=5443,{{5439,1,1},{5442,1,0},{773,10,0},{637,500,0}},cost=2000000},
			[4]={result=5258,{{5254,1,1},{5257,1,0},{773,10,0},{637,500,0}},cost=2000000},
			[5]={result=5295,{{5291,1,1},{5294,1,0},{773,10,0},{637,500,0}},cost=2000000},
			[6]={result=5332,{{5328,1,1},{5331,1,0},{773,10,0},{637,500,0}},cost=2000000},
			[7]={result=5036,{{5032,1,1},{5035,1,0},{773,10,0},{637,500,0}},cost=2000000},
			[8]={result=5073,{{5069,1,1},{5072,1,0},{773,10,0},{637,500,0}},cost=2000000},
			[9]={result=5110,{{5106,1,1},{5109,1,0},{773,10,0},{637,500,0}},cost=2000000},
			[10]={result=5147,{{5143,1,1},{5146,1,0},{773,10,0},{637,500,0}},cost=2000000},
			[11]={result=5184,{{5180,1,1},{5183,1,0},{773,10,0},{637,500,0}},cost=2000000},
			[12]={result=5221,{{5217,1,1},{5220,1,0},{773,10,0},{637,500,0}},cost=2000000},
		},
	},
}
--道具不足扣元宝,999类型使用
local itemyuanbao_conf={
	[773]=50,
}
--开始合成 auto自动购买,last为身上剩余个数{}
function equip_combi(playerid,combidata,stype,auto,last)
	 -- look('开始合成',1)
	 -- look(stype,1)
	  -- look(combidata,1)
	if playerid==nil or combidata==nil or type(combidata)~=type({}) then
		look("combidataerror")
		return
	end
	
	local Itype=combidata.itype
	if type(Itype)~=type(0) then return end
	
	local numb=combidata.numb---配置编号
	local lnum=combidata.lnum---小类别
	-- look(Itype,1)
	 -- look(lnum,1)
	local getidconf1=Combi_conf[Itype][lnum]---合成类别配置
	if getidconf1==nil then 
		 -- look(1111,1)
		SendLuaMsg( 0, { ids = equip_comi, succ=1 }, 9 )
		return 
	end
	--look(getidconf1[11],1)
	-- look(type(numb),1)
	local getidconf=getidconf1[numb]---合成物具体配置
	if getidconf==nil then 
		 -- look(2222,1)
		SendLuaMsg( 0, { ids = equip_comi, succ=1 }, 9 )
		return 
	end

	if (Itype==3 or Itype==999)  and getidconf[1][1][3]==1 then --道具进阶,升阶,提品
		-- look('道具进阶',1)
		local needmoney=getidconf.cost
		local needid1=getidconf[1][1][1]--需要装备本身id
		if   needmoney==nil or needid1==nil  then 
			-- look(3333,1)
			SendLuaMsg( 0, { ids = equip_comi, succ=1 }, 9 )
			return
		end
		local needyb=0
		-- look(121,1)
		for i=2,#getidconf[1] do
			local needid=getidconf[1][i][1]--需要id
			local neednum=getidconf[1][i][2]--需要个数
			if needid==nil or neednum==nil then return end
			if CheckGoods( needid, neednum, 1, playerid,'开始合成') == 0 then
				if auto then--自动购买
					local nownum=last[i]
					local price=itemyuanbao_conf[needid]
					if nownum==nil or price==nil then return end
					if nownum>0 and nownum<neednum then 
						if CheckGoods( needid, nownum, 1, playerid,'开始合成') == 0 then
							SendLuaMsg( 0, { ids = equip_comi, succ=2 }, 9 )
							return
						end
						
						needyb=needyb+ (neednum-nownum)*price
						if not CheckCost(playerid, needyb,1,1) then
							SendLuaMsg( 0, { ids = equip_comi, succ=3 }, 9 )
							return
						end
					elseif nownum==0 then 
						needyb=needyb+ neednum*price
						if not CheckCost(playerid, needyb,1,1) then
							SendLuaMsg( 0, { ids = equip_comi, succ=3 }, 9 )
							return
						end
					else
						return
					end
				else--不自动购买
					SendLuaMsg( 0, { ids = equip_comi, succ=2 }, 9 )
					return
				end
			end
		end

		if not CheckCost(playerid, needmoney,1,3) then
			SendLuaMsg( 0, { ids = equip_comi, succ=3 }, 9 )
			return
		end

		local eq_uip=combidata.equip_com
		if type(eq_uip)~=type({}) then return end
		local site=eq_uip.site
		local equip=eq_uip.equip
		if equip == nil or site== nil then
			look('EnhanceEquip:arg is nil.',1)
			return
		end

		local detail = CI_GetEquipDetails(site,equip)
		if detail == nil then
			look('EnhanceEquip:detail == nil.',1)
			return
		end
		if detail == nil or detail.slots == nil then
			look('detail_error'..detail,1)
			return
		end
		if detail.type>108 then
			TipCenter( GetStringMsg(435))
			return
		end
		local noweqlv=detail.levelEM--取装备等级
		local nowcolor=detail.quality--取颜色
		local nowindex=detail.index--取id
		if nowindex~=needid1 then 
			-- look(555,1)
			SendLuaMsg( 0, { ids = equip_comi, succ=1 }, 9 )
			return
		end
		if noweqlv==nil or nowcolor==nil or nowindex==nil  then return end

		if Itype==3 then
			if noweqlv<50 or noweqlv>100 or  nowcolor~=3 then 
				SendLuaMsg( 0, { ids = equip_comi, succ=1 }, 9 )
				return 
			end
			--set_obj_pos(playerid,3002)
		end

		for i=2,#getidconf[1] do
			local needid=getidconf[1][i][1]--需要id
			local neednum=getidconf[1][i][2]--需要个数
			if needid==nil or neednum==nil then return end
			if CheckGoods( needid, neednum, 0, playerid,'装备合成') == 0 then
				if auto then--自动购买
					local nownum=last[i]
					
					if nownum==nil  then return end
					if nownum>0 and nownum<neednum then 
						if CheckGoods( needid, nownum, 0, playerid,'开始合成') == 0 then
							SendLuaMsg( 0, { ids = equip_comi, succ=2 }, 9 )
							return
						end
					end
				else
					SendLuaMsg( 0, { ids = equip_comi, succ=2 }, 9 )
					return
				end
			end
		end
		if needyb>0 then 
			if not CheckCost(playerid, needyb,0,1,'装备进阶') then
				SendLuaMsg( 0, { ids = equip_comi, succ=3 }, 9 )
				return
			end
		end
		if not CheckCost(playerid, needmoney,0,3,'装备进阶') then--扣钱
			SendLuaMsg( 0, { ids = equip_comi, succ=3 }, 9 )
			return
		end
		-- look('合成成功',1)
		detail.index=getidconf.result--合成ide
		CI_UpdateEquipDetails(site, detail)--给合成装备
		-- look(stype,1)
		SendLuaMsg( 0, { ids = equip_comi, succ=0,stype=stype }, 9 )
	else  --宝石类合成
		 -- look('宝石类合成',1)
		 -- look(combidata,1)
		local itemid=combidata.itemid--道具id
		local num=combidata.num--个数
		-- look(itemid)
		-- look(num)
		local pnum=1
		-- look(numb,1)
		if Itype==3 and lnum>2 then 
			pnum=num
		end
		local pakagenum = isFullNum()
		if pakagenum < pnum then				-- 先判断背包空格数
			TipCenter(GetStringMsg(14,pnum))
			return
		end
		if type(itemid)~=type(0) or  type(num)~=type(0) then  return end
		local id=getidconf.result--合成id
		if id~=itemid then 
			SendLuaMsg( 0, { ids = equip_comi, succ=1 }, 9 )
			return 
		end
		local needmoney=getidconf.cost*num--需要钱
		if  needmoney==nil then 
			SendLuaMsg( 0, { ids = equip_comi, succ=1 }, 9 )
			return
		end
		if not CheckCost(playerid, needmoney,1,3) then--钱不够
			SendLuaMsg( 0, { ids = equip_comi, succ=3 }, 9 )
			return
		end
		--look(11)
		if getidconf[1] then
			for k,v in pairs(getidconf[1]) do
				local needid=v[1]--需要id
				local neednum=v[2]--需要个数
				if needid==nil or neednum==nil then return end
				if CheckGoods( needid, num*neednum, 1, playerid) == 0 then--查石头在不
					SendLuaMsg( 0, { ids = equip_comi, succ=2 }, 9 )
				
					return
				end
			end
		
			GiveGoods(itemid,num,1,'合成成功')--给石头
			shenqi_init(playerid, itemid)
			for k,v in pairs(getidconf[1]) do
				local needid=v[1]--需要id
				local neednum=v[2]--需要个数
				CheckGoods(needid, num*neednum, 0, playerid,'道具合成')--扣宝石
			end
			CheckCost(playerid, needmoney,0,3,'合成')--扣钱
			SendLuaMsg( 0, { ids = equip_comi, succ=0 }, 9 )
		end	
	end
end